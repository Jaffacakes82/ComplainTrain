function submitStation(){var n=$("#selected-station").val(),t=$(this).data("url");$.get(t,{selectedStation:n},function(n){var t=$("#departures");$.each(n.departureModels,function(n,i){var f=i.cancellationReason==null?!1:!0,e=i.delayReason==null?!1:!0,o=i.expected=="On time"?!0:!1,r="",u;r=o?departureBoardHtml.replace("{panelColour}","success").replace("{headingText}",allGoodIcon):f||e?departureBoardHtml.replace("{panelColour}","danger").replace("{headingText}",warningIcon):departureBoardHtml.replace("{panelColour}","warning").replace("{headingText}",alertIcon);u=r.replace("{destination}",i.destinationName).replace("{due}",i.due).replace("{expected}",i.expected).replace("{platform}",i.platform).replace("{operator}",i.operator);t.append(u)})})}var departureBoardHtml='<div class="col-md-3"><div class="panel panel-{panelColour} departure-board"><div class="panel-heading"><h3 class="panel-title">{headingText}<\/h3><\/div><ul class="list-group"><li class="list-group-item"><label>Destination:<\/label><span>{destination}<\/span><\/li><li class="list-group-item"><label>Due:<\/label><span>{due}<\/span><\/li><li class="list-group-item"><label>Expected:<\/label><span>{expected}<\/span><\/li><li class="list-group-item"><label>Platform:<\/label><span>{platform}<\/span><\/li><\/li><li class="list-group-item"><label>Operator:<\/label><span>{operator}<\/span><\/li><\/ul><\/div><\/div>',warningIcon='Warning <i class="fa fa-exclamation-circle" aria-hidden="true"><\/i>',alertIcon='Alert <i class="fa fa-exclamation-circle" aria-hidden="true"><\/i>',allGoodIcon='All good! <i class="fa fa-check-circle-o" aria-hidden="true"><\/i>',loadingIcon='<i class="fa fa-cog fa-spin fa-3x fa-fw"><\/i><span class="sr-only">Loading...<\/span>';$(function(){$("#station").autocomplete({source:function(n,t){$.ajax({url:"/Home/SearchStations",dataType:"json",data:{term:n.term},success:function(n){t(n)}})},minLength:1,select:function(n,t){$("#station").text(t.item.value);$("#selected-station").val(t.item.key)}});$("#submit-station").click(submitStation)});