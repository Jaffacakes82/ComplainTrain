function showComplainModal(){var n=$(this);return $("#complain-modal").modal(),$("#complain-modal").show(),!1}function submitStation(){var t=$("#selected-station").val();t=="";var r=$(this).data("url"),n=$("#station-search"),i=$("#search-again"),u=$("#no-trains");$(n).empty();$(n).append(loadingIcon);$.get(r,{selectedStation:t},function(t){var r=$("#departures"),e=$(".body-content"),f=$("#departures-table > tbody");t==null||t.departureModels==null?($(n).hide(),$(u).show(),$(i).show()):($(n).hide(),$.each(t.departureModels,function(n,t){var r=t.cancellationReason==null?!1:!0,u=t.delayReason==null?!1:!0,o=t.expected=="On time"?!0:!1,i="",e;o?i=departureRowHtml.replace("{context}","success").replace("{status}",allGoodIcon):r||u?(reasonInput=!r&&u?reasonInput.replace("{reason-string}",t.delayReason):reasonInput.replace("{reason-string}",t.cancellationReason),i=departureRowHtml.replace("{context}","danger row-clickable").replace("{status}",warningIcon).replace("{reason}",reasonInput)):i=departureRowHtml.replace("{context}","warning row-clickable").replace("{status}",alertIcon);t.platform==null&&(t.platform="");e=i.replace("{destination}",t.destinationName).replace("{due}",t.due).replace("{expected}",t.expected).replace("{expected}",t.expected).replace("{platform}",t.platform).replace("{operator}",t.operator);$(f).append(e)}),$(r).show(),$(i).show())})}var departureRowHtml='<tr class="{context}"><td class="status-body">{status}<\/td><td>{destination}<\/td><td>{due}<span class="expected-mob">{expected}<\/span><\/td><td class="expected-body">{expected}<\/td><td>{platform}<\/td><td class="operator-body">{operator}<\/td>{reason}';"<\/tr>";var warningIcon='<i class="fa fa-exclamation-circle" aria-hidden="true"><\/i>',alertIcon='<i class="fa fa-exclamation-triangle" aria-hidden="true"><\/i>',allGoodIcon='<i class="fa fa-check-circle-o" aria-hidden="true"><\/i>',loadingIcon='<i class="fa fa-cog fa-spin fa-3x fa-fw"><\/i><span class="sr-only">Loading...<\/span>',reasonInput='<input type="hidden" value="{reason-string}" />';$(function(){$("#station").autocomplete({source:function(n,t){$.ajax({url:"/Home/SearchStations",dataType:"json",data:{term:n.term},success:function(n){t(n)}})},minLength:1,select:function(n,t){$("#station").text(t.item.value);$("#selected-station").val(t.item.key)}});$("#submit-station").click(submitStation);$(document).on("click touchstart","#departures-table > tbody > tr.danger, #departures-table > tbody > tr.warning",showComplainModal)});